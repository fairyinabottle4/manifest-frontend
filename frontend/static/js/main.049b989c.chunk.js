(this.webpackJsonppatientor=this.webpackJsonppatientor||[]).push([[0],{212:function(e,a,t){"use strict";t.r(a);var n,l,r=t(0),c=t.n(r),i=t(67),s=t.n(i),o=(t(179),t(32)),u=t.n(o),b=t(61),j=t(31),d=t(45),h=t.n(d),O=t(85),v=t(12),p=t(224),m=t(230),x=t(229),f=t(223),g=t(161),M=t.n(g),L=t(228),y=t(96),C=t(232),N="http://localhost:3000/api",A=t(92),S=t(17),F=function(e){return{type:"SET_DIAGNOSIS_LIST",payload:e}},w=t(4),T={patients:{},diagnosis:{}},B=Object(r.createContext)([T,function(){return T}]),D=function(e){var a=e.reducer,t=e.children,n=Object(r.useReducer)(a,T),l=Object(j.a)(n,2),c=l[0],i=l[1];return Object(w.jsx)(B.Provider,{value:[c,i],children:t})},E=function(){return Object(r.useContext)(B)},k=function(){var e,a,t=E(),n=Object(j.a)(t,2),l=n[0].patients,c=n[1],i=Object(r.useState)(),s=Object(j.a)(i,2),o=s[0],d=s[1],O=Object(v.f)().id;Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(u.a.mark((function e(){var a,t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("".concat(N,"/patients/").concat(O));case 3:a=e.sent,t=a.data,d(t),c({type:"ADD_PATIENT",payload:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(b.a)(u.a.mark((function e(){var a,t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("".concat(N,"/diagnoses"));case 3:a=e.sent,t=a.data,c(F(t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();l[O]&&l[O].confirmNumber?d(l[O]):(e(),a())}),[O]);var p=null!==(e=null===o||void 0===o||null===(a=o.entries)||void 0===a?void 0:a.length)&&void 0!==e?e:0;return Object(w.jsx)(w.Fragment,{children:o&&Object(w.jsxs)("section",{children:[Object(w.jsxs)(L.a,{children:[Object(w.jsx)(L.a.Content,{header:o.name}),Object(w.jsxs)(L.a.Content,{extra:!0,children:[Object(w.jsx)(y.a,{name:function(e){switch(e){case"silver":return"chess knight";case"gold":return"chess rook";case"platinum":return"chess king";default:return"square full"}}(o.frequentFlyer)}),o.confirmNumber]})]}),p>0&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h2",{children:"Recent Flights"}),Object(w.jsx)(C.a,{children:o.entries.map((function(e,a){return function(e,a){return Object(w.jsxs)("div",{children:[Object(w.jsx)(m.a,{as:"h4",children:e.date}),Object(w.jsx)("p",{children:e.travelClass}),Object(w.jsx)(m.a,{as:"h3",children:e.route}),!a&&Object(w.jsx)(f.a,{section:!0})]})}(e,a+1===p)}))})]})]})})},I=t(23),V=t(225),H=function(e){var a=e.name,t=e.label,n=e.options;return Object(w.jsxs)(V.a.Field,{children:[Object(w.jsx)("label",{children:t}),Object(w.jsx)(I.b,{as:"select",name:a,className:"ui dropdown",children:n.map((function(e){return Object(w.jsx)("option",{value:e.value,children:e.label||e.value},e.value)}))})]})},R=function(e){var a=e.field,t=e.label,n=e.placeholder;return Object(w.jsxs)(V.a.Field,{children:[Object(w.jsx)("label",{children:t}),Object(w.jsx)(I.b,Object(S.a)({placeholder:n},a)),Object(w.jsx)("div",{style:{color:"red"},children:Object(w.jsx)(I.a,{name:a.name})})]})},P=t(227),G=t(226),K=t(233);!function(e){e.First="first",e.Business="business",e.PremiumEconomy="premium economy",e.Economy="economy"}(n||(n={})),function(e){e.Silver="silver",e.Gold="gold",e.Platinum="platinum"}(l||(l={}));for(var _=[{value:"1",label:"1"}],q=[{value:"A",label:"A"},{value:"C",label:"C"},{value:"D",label:"D"},{value:"F",label:"F"}],J=[],U=[{value:"A",label:"A"},{value:"D",label:"D"},{value:"F",label:"F"},{value:"K",label:"K"}],Y=11;Y<24;Y++)13!==Y&&J.push({value:Y.toString(),label:Y.toString()});var z=[];console.log(J);for(var Q=31;Q<34;Q++)z.push({value:Q.toString(),label:Q.toString()});for(var W=[{value:"A",label:"A"},{value:"C",label:"C"},{value:"D",label:"D"},{value:"E",label:"E"},{value:"F",label:"F"},{value:"G",label:"G"},{value:"H",label:"H"},{value:"K",label:"K"}],X=[],Z=41;Z<62;Z++)X.push({value:Z.toString(),label:Z.toString()});var $=[{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"},{value:"D",label:"D"},{value:"E",label:"E"},{value:"G",label:"G"},{value:"H",label:"H"},{value:"J",label:"J"},{value:"K",label:"K"}],ee=[{value:"",label:""},{value:"BBML",label:"BBML Baby Meal"},{value:"CHML",label:"CHML Child Meal"},{value:"HNML",label:"HNML Hindu Non-Vegetarian Meal"},{value:"KSML",label:"KSML Kosher Meal"},{value:"KSRFM",label:"KSRFM Kosher Refreshment"},{value:"MOML",label:"MOML Muslim Meal"},{value:"AVML",label:"AVML Vegetarian Indian Meal"},{value:"VJML",label:"VJML Vegetarian Jain Meal"},{value:"VOML",label:"VOML Vegetarian Oriental Meal"},{value:"VGML",label:"VGML Vegetarian Vegan Meal"},{value:"VLML",label:"VLML Vegetarian Lacto-Ovo Meal"},{value:"BLML",label:"BLML Bland Meal"},{value:"DBML",label:"DBML Diabetic Meal"},{value:"FPML",label:"FPML Fruit Platter"},{value:"GFML",label:"GFML Gluten Intolerant Meal"},{value:"LFML",label:"LFML Low Fat Meal"},{value:"NLML",label:"NLML Low Lactose Meal"},{value:"LSML",label:"LSML Low Salt Meal"},{value:"MAMLA",label:"MAMLA Minimal Allergen Meal"},{value:"NFMLA",label:"NFMLA Non-Strict Nut Free Meal"},{value:"NSFML",label:"NSFML Non Seafood Meal"},{value:"SFML",label:"SFML Seafood Meal"}],ae=[{value:n.First,label:"First"},{value:n.Business,label:"Business"},{value:n.PremiumEconomy,label:"PremiumEconomy"},{value:n.Economy,label:"Economy"}],te=function(e){var a=e.onSubmit,t=e.onCancel;return Object(w.jsx)(I.d,{initialValues:{travelClass:n.Economy,dietaryRequirements:"",rowNumber:"41",rowLetter:"A",name:"",confirmNumber:"",dateOfBirth:""},onSubmit:a,validate:function(e){var a="Field is required",t={};return e.name||(t.name=a),e.confirmNumber||(t.confirmNumber=a),e.dateOfBirth||(t.dateOfBirth=a),t},children:function(e){var a=e.isValid,n=e.dirty,l=e.values;return Object(w.jsxs)(I.c,{className:"form ui",children:[Object(w.jsx)(I.b,{label:"Name",placeholder:"Name",name:"name",component:R}),Object(w.jsx)(I.b,{label:"Booking Confirmation",placeholder:"6-character alphanumeric",name:"confirmNumber",component:R}),Object(w.jsx)(I.b,{label:"Date Of Birth",placeholder:"YYYY-MM-DD",name:"dateOfBirth",component:R}),Object(w.jsx)(H,{label:"Class",name:"travelClass",options:ae}),Object(w.jsx)(H,{label:"Row Number",name:"rowNumber",options:"economy"===l.travelClass?X:"premium economy"===l.travelClass?z:"business"===l.travelClass?J:_}),Object(w.jsx)(H,{label:"Row Letter",name:"rowLetter",options:"economy"===l.travelClass?$:"premium economy"===l.travelClass?W:"business"===l.travelClass?U:q}),Object(w.jsx)(H,{label:"Dietary Requirements",name:"dietaryRequirements",options:ee}),Object(w.jsxs)(K.a,{children:[Object(w.jsx)(K.a.Column,{floated:"left",width:5,children:Object(w.jsx)(x.a,{type:"button",onClick:t,color:"red",children:"Cancel"})}),Object(w.jsx)(K.a.Column,{floated:"right",width:5,children:Object(w.jsx)(x.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a,children:"Add"})})]})]})}})},ne=function(e){var a=e.modalOpen,t=e.onClose,n=e.onSubmit,l=e.error;return Object(w.jsxs)(G.a,{open:a,onClose:t,centered:!1,closeIcon:!0,children:[Object(w.jsx)(G.a.Header,{children:"Add a new passenger"}),Object(w.jsxs)(G.a.Content,{children:[l&&Object(w.jsx)(C.a,{inverted:!0,color:"red",children:"Error: ".concat(l)}),Object(w.jsx)(te,{onSubmit:n,onCancel:t})]})]})},le=t(234),re=function(e){var a=e.rating;return Object(w.jsx)("div",{className:"health-bar",children:Object(w.jsx)(le.a,{icon:"star",disabled:!0,rating:a,maxRating:5})})},ce=function(){var e=E(),a=Object(j.a)(e,2),t=a[0].patients,n=a[1],l=c.a.useState(!1),r=Object(j.a)(l,2),i=r[0],s=r[1],o=c.a.useState(),d=Object(j.a)(o,2),v=d[0],m=d[1],f=function(){s(!1),m(void 0)},g=function(){var e=Object(b.a)(u.a.mark((function e(a){var t,l,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),e.prev=1,e.next=4,h.a.post("".concat(N,"/patients"),a);case 4:t=e.sent,l=t.data,n({type:"ADD_PATIENT",payload:l}),f(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error((null===(r=e.t0.response)||void 0===r?void 0:r.data)||"Unknown Error"),m((null===(c=e.t0.response)||void 0===c||null===(i=c.data)||void 0===i?void 0:i.error)||"Unknown error");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)(p.a,{textAlign:"center",children:Object(w.jsx)("h3",{children:"Passenger Manifest"})}),Object(w.jsxs)(P.a,{celled:!0,children:[Object(w.jsx)(P.a.Header,{children:Object(w.jsxs)(P.a.Row,{children:[Object(w.jsx)(P.a.HeaderCell,{children:"Name"}),Object(w.jsx)(P.a.HeaderCell,{children:"Seat Number"}),Object(w.jsx)(P.a.HeaderCell,{children:"Travel Class"}),Object(w.jsx)(P.a.HeaderCell,{children:"Dietary Requirements"}),Object(w.jsx)(P.a.HeaderCell,{children:"Airline Rating"})]})}),Object(w.jsx)(P.a.Body,{children:Object.values(t).map((function(e){return Object(w.jsxs)(P.a.Row,{children:[Object(w.jsxs)(P.a.Cell,{children:[" ",Object(w.jsx)(O.b,{to:"/patients/".concat(e.id),children:e.name})," "]}),Object(w.jsx)(P.a.Cell,{children:e.seatNumber}),Object(w.jsx)(P.a.Cell,{children:e.travelClass}),Object(w.jsx)(P.a.Cell,{children:e.dietaryRequirements}),Object(w.jsx)(P.a.Cell,{children:Object(w.jsx)(re,{rating:e.rating})})]},e.id)}))})]}),Object(w.jsx)(ne,{modalOpen:i,onSubmit:g,error:v,onClose:f}),Object(w.jsx)(x.a,{onClick:function(){return s(!0)},children:"Add New Passenger"})]})},ie=function(){var e=Object(r.useState)(!1),a=Object(j.a)(e,2),t=a[0],n=a[1],l=Object(r.useState)({origin:"",destination:"",flightNumber:"",aircraftType:""}),i=Object(j.a)(l,2),s=i[0],o=i[1],d=E(),g=Object(j.a)(d,2)[1];c.a.useEffect((function(){h.a.get("".concat(N,"/ping")),function(){var e=Object(b.a)(u.a.mark((function e(){var a,t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("".concat(N,"/patients"));case 3:a=e.sent,t=a.data,g({type:"SET_PATIENT_LIST",payload:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()(),function(){var e=Object(b.a)(u.a.mark((function e(){var a,t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("".concat(N,"/diagnoses"));case 3:a=e.sent,t=a.data,g(F(t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[g]);var L=[{value:"",label:""},{value:"Boeing 777",label:"Boeing 777"},{value:"Boeing 787",label:"Boeing 787"},{value:"Airbus 350",label:"Airbus 350"}];return t?Object(w.jsx)("div",{className:"App",children:Object(w.jsx)(O.a,{children:Object(w.jsxs)(p.a,{children:[Object(w.jsx)(m.a,{as:"h1",children:"Broadwing Airlines"}),Object(w.jsxs)("div",{style:{display:"flex"},children:[Object(w.jsx)("h2",{children:s.flightNumber}),Object(w.jsxs)("p",{style:{marginLeft:"5px",marginTop:"8px"},children:[s.origin,"-",s.destination]})]}),Object(w.jsx)(x.a,{as:O.b,to:"/",primary:!0,children:"Home"}),Object(w.jsx)(M.a,{format:"HH:mm:ss",ticking:!0,timezone:"Asia/Singapore"}),Object(w.jsx)(f.a,{hidden:!0}),Object(w.jsxs)(v.c,{children:[Object(w.jsx)(v.a,{path:"/patients/:id",children:Object(w.jsx)(k,{})}),Object(w.jsx)(v.a,{path:"/",children:Object(w.jsx)(ce,{})})]})]})})}):Object(w.jsx)(I.d,{initialValues:{origin:"",destination:"",aircraftType:"",flightNumber:""},onSubmit:function(e){return function(e){n(!0);var a={origin:e.origin.toUpperCase(),destination:e.destination.toUpperCase(),flightNumber:e.flightNumber.substring(0,2).toUpperCase().concat(e.flightNumber.substring(2)),aircraftType:e.aircraftType};o(a),console.log(a)}(e)},validate:function(e){var a="Field is required",t="IATA Airport code must be exactly 3 characters long",n={};return e.origin||(n.origin=a),e.destination||(n.destination=a),e.aircraftType||(n.aircraftType=a),3!==e.origin.length&&(n.origin=t),3!==e.destination.length&&(n.destination=t),(e.flightNumber.length>6||e.flightNumber.length<5)&&(n.flightNumber="Flight number must be 5 or 6 digits long"),n},children:function(){return Object(w.jsxs)("div",{style:se,children:[Object(w.jsx)(m.a,{as:"h1",children:"Broadwing Airlines"}),Object(w.jsxs)(I.c,{children:[Object(w.jsx)(I.b,{label:"Origin",placeholder:"3 letter IATA airport code",name:"origin",component:R}),Object(w.jsx)(I.b,{label:"Destination",placeholder:"3 letter IATA airport code",name:"destination",component:R}),Object(w.jsx)(I.b,{label:"Flight Number",placeholder:"Flight Number",name:"flightNumber",component:R}),Object(w.jsx)(H,{label:"Aircraft type",name:"aircraftType",options:L}),Object(w.jsx)(x.a,{type:"submit",color:"green",children:"Continue"})]})]})}})},se={marginTop:"20%",marginLeft:"45%"};s.a.render(Object(w.jsx)(D,{reducer:function(e,a){switch(a.type){case"SET_PATIENT_LIST":return Object(S.a)(Object(S.a)({},e),{},{patients:Object(S.a)(Object(S.a)({},a.payload.reduce((function(e,a){return Object(S.a)(Object(S.a)({},e),{},Object(A.a)({},a.id,a))}),{})),e.patients)});case"ADD_PATIENT":return Object(S.a)(Object(S.a)({},e),{},{patients:Object(S.a)(Object(S.a)({},e.patients),{},Object(A.a)({},a.payload.id,a.payload))});case"SET_DIAGNOSIS_LIST":return Object(S.a)(Object(S.a)({},e),{},{diagnosis:Object(S.a)(Object(S.a)({},a.payload.reduce((function(e,a){return Object(S.a)(Object(S.a)({},e),{},Object(A.a)({},a.code,a))}),{})),e.diagnosis)});default:return e}},children:Object(w.jsx)(ie,{})}),document.getElementById("root"))}},[[212,1,2]]]);
//# sourceMappingURL=main.049b989c.chunk.js.map